# labyrinths.py

Генерация, решение и совместное прохождение лабиринтов на Python

[![codecov](https://codecov.io/github/Dliwk/labyrinths-py/branch/dev/graph/badge.svg?token=XadHp4cYfA)](https://codecov.io/github/Dliwk/labyrinths-py)

## Запуск
1. Требует Python `>= 3.10`
2. Установка `hatch`. Обычно есть в репозиториях любого дистрибутива Linux, но можно и поставить через pip:
    ```bash
    pip install hatch
    ```
3. Переход в окружение проекта:
    ```bash
    hatch shell
    ```
4. Запуск:
    ```bash
    python -m labyrinths -v
    ```
5. Тесты можно запустить через
    ```bash
   hatch run test:test
    ```

## Функционал

- ✔ Генерация с помощью DFS или минимального остовного дерева; ~~различные алгоритмы поиска мин. остова~~ (кажется, нет
  смысла, минимальное остовное дерево все равно однозначно задается)
- ✔ Вариант генерации выбирается с помощью аргумента командной строки
- ~~Отображение лабиринтов в консоли с помощью специальных символов~~ (я не нашел подходящих спец. символов)
- ✔ Сохранение/загрузка лабиринтов в/из файлов
- ✔ Решение лабиринтов и отображение пути
- ✔ Графический интерфейс
- ✔ Возможность пользователю самому проходить лабиринт
- Возможность проходить лабиринт в мультиплеерном режиме
- Чат с другими игроками в лобби

## Архитектура (набросок)

### Классы

#### Классы, связанные с генерацией, хранением, загрузкой и сохранением лабиринтов

- `MazeGenerator` - класс, занимающийся генерацией лабиринтов. Имеет разные методы для настройки генерации, сама
  генерация запускается методом `generate()`.
- `MazeData` - результат генерации лабиринта. Можно распечатать в консоль. Можно сохранить в файл или загрузить из
  него.

#### Классы, связанные с текущим прохождением лабиринта (игроками)

- `Game` - игра. Содержит в себе лабиринт и список игроков.
- `Player` - класс игрока (как участник игры). Хранит свои координаты в лабиринте и ссылку на сессионного игрока.

#### Классы, связанные с управлением игроками (возможно, удаленно)

- `ClientController` - абстрактный класс управления игроком.
- `LocalClientController` - локальное управление игроком (клавиатурой).
- `RemoteClientController` - удаленное управление игроком.

#### Классы, связанные с лобби (сессией)

- `SessionPlayer` - игрок в лобби. Может не принимать участия в самой игре, а только наблюдать или общаться в чате.
  Хранит имя, цвет и ссылку на используемый контроллер.
- `Session` - абстрактный класс сессии. Сообщает `Renderer`-у о всех происходящих событиях: передвижение игрока,
  сообщение в чате, новая игра.
- `HostSession` - класс сессии, используемый у сервера (хоста). Содержит список подключенных игроков, ссылку на текущую
  игру.
- `ClientSession` - класс сессии, используемый у клиента. Хранит копию игры (`Game`) сервера, которую постоянно с ним
  синхронизирует. Получает все события от сервера.

#### Классы, связанные с отрисовкой (очень поверхностный набросок)

- `MainWindow` - основной класс, отвечающий за отрисовку всего. Хранит `MazeWidget`, которому передает события от
  сессии, связанные с игрой.
- `MazeWidget` - класс, отвечающий за отрисовку игры.
